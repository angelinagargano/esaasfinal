<div class="signup-page">
  <h1>Sign up</h1>

  <%= form_with(model: @user, url: signup_path, local: true) do |f| %>
    <% if @user.errors.any? %>
      <div class="alert alert-danger">
        <ul class="mb-0">
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-2">
      <%= f.label :email, 'Email' %><br>
      <%= f.email_field :email, class: 'form-control' %>
    </div>

    <div class="mb-2">
      <%= f.label :name, 'Name' %><br>
      <%= f.text_field :name, class: 'form-control' %>
    </div>

    <div class="mb-2">
      <%= f.label :username, 'Username' %><br>
      <%= f.text_field :username, class: 'form-control' %>
    </div>

    <div class="mb-2">
      <%= f.label :password, 'Password' %><br>
      <div class="input-group" style="width: 100%;">
        <%= f.password_field :password, class: 'form-control', id: 'password-field' %>
        <button class="btn btn-outline-secondary" type="button" id="toggle-password">
          <span id="password-icon">ğŸ‘ï¸</span>
        </button>
      </div>
    </div>

    <div class="mb-2">
      <%= f.label :password_confirmation, 'Confirm Password' %><br>
      <div class="input-group" style="width: 100%;">
        <%= f.password_field :password_confirmation, class: 'form-control', id: 'password-confirmation-field' %>
        <button class="btn btn-outline-secondary" type="button" id="toggle-password-confirmation">
          <span id="password-confirmation-icon">ğŸ‘ï¸</span>
        </button>
      </div>
    </div>

    <div class="mt-3">
      <%= f.submit 'Sign up', class: 'btn btn-primary' %>
    </div>
  <% end %>

  <p class="mt-3">Already have an account? <%= link_to "Log in", login_path %></p>

</div>

  <script>
    document.getElementById('toggle-password').addEventListener('click', function() {
      const passwordField = document.getElementById('password-field');
      const icon = document.getElementById('password-icon');
      
      if (passwordField.type === 'password') {
        passwordField.type = 'text';
        icon.textContent = 'ğŸ™ˆ';
      } else {
        passwordField.type = 'password';
        icon.textContent = 'ğŸ‘ï¸';
      }
    });

    document.getElementById('toggle-password-confirmation').addEventListener('click', function() {
      const passwordField = document.getElementById('password-confirmation-field');
      const icon = document.getElementById('password-confirmation-icon');
      
      if (passwordField.type === 'password') {
        passwordField.type = 'text';
        icon.textContent = 'ğŸ™ˆ';
      } else {
        passwordField.type = 'password';
        icon.textContent = 'ğŸ‘ï¸';
      }
    });
  </script>