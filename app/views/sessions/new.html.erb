<h1>Log in</h1>

<%= form_with(url: login_path, local: true) do |f| %>
  <% if flash[:alert] %>
    <div class="alert alert-danger">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <% if flash[:notice] %>
    <div class="alert alert-info">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <div class="mb-2">
    <%= f.label :username_or_email, 'Username or Email' %><br>
    <%= f.text_field :username_or_email, class: 'form-control' %>
  </div>

  <div class="mb-2">
    <%= f.label :password, 'Password' %><br>
    <div class="input-group">
      <%= f.password_field :password, class: 'form-control', id: 'login-password-field' %>
      <button class="btn btn-outline-secondary" type="button" id="toggle-login-password">
        <span id="login-password-icon">ğŸ‘ï¸</span>
      </button>
    </div>
  </div>

  <div class="mt-3">
    <%= f.submit 'Log in', class: 'btn btn-primary' %>
  </div>
<% end %>

<p class="mt-3">Don't have an account? <%= link_to "Sign up", signup_path %></p>

<script>
  document.getElementById('toggle-login-password').addEventListener('click', function() {
    const passwordField = document.getElementById('login-password-field');
    const icon = document.getElementById('login-password-icon');
    
    if (passwordField.type === 'password') {
      passwordField.type = 'text';
      icon.textContent = 'ğŸ™ˆ';
    } else {
      passwordField.type = 'password';
      icon.textContent = 'ğŸ‘ï¸';
    }
  });
</script>