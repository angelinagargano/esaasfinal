<!-- app/views/performances/index.html.erb -->
<h2>All Performances</h2>

<%= form_tag performances_path, method: :get, id: 'filter_form', local: true do %>
  <div class="mb-3">
    <label class="form-label me-2" for="style">Filter by Style:</label>
    <% @all_styles.each do |style| %>
      <div class="form-check form-check-inline">
        <%= check_box_tag "styles[#{style}]", "1", @styles_to_show.include?(style), class: 'form-check-input' %>
        <%= label_tag "styles[#{style}]", style, class: 'form-check-label' %>
      </div>
    <% end %>
  </div>

  <div class="mb-3">
    <label class="form-label me-2" for="sort_by">Sort by:</label>
    <%= select_tag :sort_by,
                   options_for_select([["Name", "name"],
                                       ["Date", "date"],
                                       ["Price", "price"]],
                                       @sort_by),
                   id: "sort_by",
                   class: "form-select d-inline w-auto" %>
  </div>

  <%= submit_tag 'Refresh', id: 'filter_submit', class: 'btn btn-primary' %>
<% end %>

<div id="events">
  <% @events.each do |event| %>
    <div id="<%= dom_id event %>" class="card mb-3 shadow-sm p-3 rounded-3">
      <h4 class="card-title"><%= event.name %></h4>
      <p><strong>Venue:</strong> <%= event.venue %></p>
      <p><strong>Time:</strong> <%= event.time %></p>
      <p><strong>Style:</strong> <%= event.style %></p>
      <p><strong>Location:</strong> <%= event.location %></p>
      <p><strong>Price:</strong> <%= number_to_currency(event.price) %></p>
      <p><strong>Description:</strong> <%= event.description %></p>
      <p>
        <%= link_to "Get Tickets", event.tickets, class: "btn btn-success", target: "_blank" %>
      </p>
    </div>
  <% end %>
</div>

<%= link_to 'Add new performance', new_performance_path, class: 'btn btn-primary mt-3' %>
